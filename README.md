# PDF Accessibility Checker

> Tools to perform PDF accessibility checks.

[![Support Level](https://img.shields.io/badge/support-beta-blueviolet.svg)](#support-level) [![MIT License](https://img.shields.io/github/license/10up/PDF-accessibility-checker.svg)](https://github.com/10up/PDF-accessibility-checker/blob/develop/LICENSE.md) 

## Tools included

### apps-script/PDFReports.gs

Script for Google Sheet to copy over columns generated by the PDF Accessibility report to all the other tabs where the PDF name matches.

### wp-cli/find-pdfs.php

WP-CLI script to grab all the PDFs from a WordPress single/multisite instance. To use this CLI command:

```
    wp mscm find-pdfs export --post_types=posts,page --network=true
```

This will output a single CSV file or one CSV per site in case of multisite and `--network=true` flag.

#### Options for find-pdfs command

**[<output_file>]** : The name of the output file (default: pdfs-{site}.csv).
	
**[--post_types=<post_types>]** : Comma separated list of post types to search (default: post).
	
**[--network=<bool>]** : Whether to search across the entire network (default: false).
	
**[--start_date=<date>]** : Filter posts from this date onwards (format: MM-DD-YYYY).

### download-files.sh

This bash script will get data from a passed CSV and download each file described by the `url` column using `wget`. `wget` is used because it has a built-in feature to follow links in case of redirections. The script will rename every file which isn't a PDF to a PDF since we're sure we're dealing with a PDF and PDFs behind the redirects, doesn't respect the filename and not giving the proper extension. After making sure we have only PDF files, the script will loop again on PDF files in the directory and run the Accessibility Checker node script on each file.

#### About Adobe Acrobat service APIs

In order to use these APIs you need to create [your credentials](https://acrobatservices.adobe.com/dc-integration-creation-app-cdn/main.html?api=pdf-services-api) and then add those to your environment variables.

```
export PDF_SERVICES_CLIENT_ID=<client_id>
export PDF_SERVICES_CLIENT_SECRET=<client_secret>
```

use:

```
    sh download-files.sh input_csv.csv DirectoryToDownloadFiles/ <csv_col_number>
```

** Note: the csv_row_number parameter indicates in which column position is the PDF URL.

### pdf-accessibility-checker.js

This script runs the PDF Accessibility Checker on a PDF passed and will return a JSON report with the results of the test.

use:

```
    node pdf-accessibility-checker.js some-pdf-file.pdf
```

### parser-merger.js

This is the final script that parses and merges CSV input file with PDF accessibility reports and adds each test on a column to make the reports in the spreadsheets more readable. This script will take the first parameter as the same name as the CSV that contains a full list of PDFs from a site and attach to each row all the test on a single column and output the resultant CSV in a folder with the same name.

use:

```
    node parser-merger.js final-pdf-report-with-all-the-PDFs
```

## Support Level

**Beta:** This project is quite new and we're not sure what our ongoing support level for this will be. Bug reports, feature requests, questions, and pull requests are welcome. If you like this project please let us know, but be cautious using this in a Production environment!

## Changelog

A complete listing of all notable changes to PDF Accessibility Checker are documented in [CHANGELOG.md](https://github.com/10up/PDF-accessibility-checker/blob/develop/CHANGELOG.md).

## Contributing

Please read [CODE_OF_CONDUCT.md](https://github.com/10up/PDF-accessibility-checker/blob/develop/CODE_OF_CONDUCT.md) for details on our code of conduct, [CONTRIBUTING.md](https://github.com/10up/PDF-accessibility-checker/blob/develop/CONTRIBUTING.md) for details on the process for submitting pull requests to us, and [CREDITS.md](https://github.com/10up/PDF-accessibility-checker/blob/develop/CREDITS.md) for a listing of maintainers of, contributors to, and libraries used by PDF Accessibility Checker.

## Like what you see?

<p align="center">
<a href="http://10up.com/contact/"><img src="https://10up.com/uploads/2016/10/10up-Github-Banner.png" width="850"></a>
</p>